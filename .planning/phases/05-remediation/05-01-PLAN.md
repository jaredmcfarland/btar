---
phase: 05-remediation
plan: 01
type: tdd
wave: 1
depends_on: []
files_modified:
  - src/core/remediation/recommendations.ts
  - src/core/remediation/recommendations.test.ts
autonomous: true

must_haves:
  truths:
    - "Score 90+ receives 'excellent' recommendations (maintain practices)"
    - "Score 70-89 receives 'good' recommendations (minor improvements)"
    - "Score 50-69 receives 'needs-work' recommendations (prioritized fixes)"
    - "Score <50 receives 'poor' recommendations (foundation first)"
    - "Recommendations are ordered by impact (highest first)"
  artifacts:
    - path: "src/core/remediation/recommendations.ts"
      provides: "Tier-based recommendation generation"
      exports: ["generateRecommendations", "Recommendation", "RecommendationTier"]
    - path: "src/core/remediation/recommendations.test.ts"
      provides: "TDD test coverage for recommendations"
      min_lines: 100
  key_links:
    - from: "generateRecommendations"
      to: "ScoreResult"
      via: "takes ScoreResult as input"
      pattern: "ScoreResult"
    - from: "generateRecommendations"
      to: "MetricsReport"
      via: "uses metric values for context"
      pattern: "MetricsReport"
---

<objective>
Implement tier-based recommendation engine using TDD.

Purpose: Provide actionable, prioritized recommendations based on Agent-Readiness Score. Users with different scores need different guidance.
Output: Recommendation types and generateRecommendations function with full test coverage.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
@./.claude/get-shit-done/references/tdd.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/core/scoring.ts
@src/core/metrics/index.ts
@src/core/metrics/types.ts
</context>

<feature>
  <name>Tier-Based Recommendations</name>
  <files>src/core/remediation/recommendations.ts, src/core/remediation/recommendations.test.ts</files>
  <behavior>
    generateRecommendations(scoreResult: ScoreResult, report: MetricsReport) → Recommendation[]

    Tier logic based on ScoreInterpretation:
    - "excellent" (90+): Maintain practices, consider advanced metrics
    - "good" (70-89): Fix remaining type/lint errors, improve coverage
    - "needs-work" (50-69): Prioritize: 1. Type errors (P0), 2. Lint (P1), 3. Coverage (P2)
    - "poor" (<50): Foundation first - add type checking if missing, then linter

    Each Recommendation has:
    - tier: "P0" | "P1" | "P2" | "P3"
    - category: "type-strictness" | "lint-errors" | "test-coverage" | "general"
    - message: Human-readable recommendation
    - tool?: Suggested tool to use (e.g., "ruff --fix", "eslint --fix")
    - impact: "high" | "medium" | "low"

    Cases:
    - score 95, 0 errors → ["Excellent! Consider property-based tests"]
    - score 75, 5 type errors → ["Fix 5 type errors for higher score", ...]
    - score 45, 50 lint errors → ["Set up linter", "Fix lint errors", ...]
  </behavior>
  <implementation>
    1. Create src/core/remediation/ directory
    2. Define Recommendation interface and RecommendationTier type
    3. Implement generateRecommendations with tier-based logic
    4. Order recommendations by tier (P0 first), then by impact
    5. Include specific tool suggestions from LINTER_TOOLS when applicable
  </implementation>
</feature>

<verification>
- npm test -- recommendations passes all tests
- npm run build succeeds
- Exports are available from src/core/remediation/index.ts
</verification>

<success_criteria>
- Failing tests written and committed (RED)
- Implementation passes all tests (GREEN)
- Refactor complete if needed
- 2-3 TDD commits present
- Recommendations generated for all score tiers
</success_criteria>

<output>
After completion, create `.planning/phases/05-remediation/05-01-SUMMARY.md`
</output>
